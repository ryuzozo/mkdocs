{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Minecraft \u30b5\u30fc\u30d0\u60c5\u5831 Description IP\u30a2\u30c9\u30ec\u30b9 47.91.16.143 \u30c9\u30e1\u30a4\u30f3 minecraft.ryuzo.info \u30dd\u30fc\u30c8\u756a\u53f7(JE) 25565 \u30dd\u30fc\u30c8\u756a\u53f7(BE) 19132 Version spigot-1.19 (MC: 1.19) \u79fb\u52d5\u7bc4\u56f2 world radius 8000 \u79fb\u52d5\u7bc4\u56f2 nether radius 1000 \u79fb\u52d5\u7bc4\u56f2 end radius 6000 \u5b9a\u54e1 20\u4eba plugin \u30fbDynmap \u30fbGeyser \u30fbFloodGate \u30fbWorldBorder Dynmap https://minecraft.ryuzo.info/dynmap/ Rule \u30b5\u30fc\u30d0\u304c\u7206\u767a\u3057\u3066\u3082\u6587\u53e5\u3092\u8a00\u308f\u306a\u3044 \u7ba1\u7406\u8005\u304c\u5931\u8e2a\u3057\u3066\u3082\u6587\u53e5\u3092\u8a00\u308f\u306a\u3044 \u904e\u53bb\u306e\u601d\u3044\u3067 imymeminecraftserver wiki","title":"Minecraft"},{"location":"#minecraft","text":"","title":"Minecraft"},{"location":"#_1","text":"Description IP\u30a2\u30c9\u30ec\u30b9 47.91.16.143 \u30c9\u30e1\u30a4\u30f3 minecraft.ryuzo.info \u30dd\u30fc\u30c8\u756a\u53f7(JE) 25565 \u30dd\u30fc\u30c8\u756a\u53f7(BE) 19132 Version spigot-1.19 (MC: 1.19) \u79fb\u52d5\u7bc4\u56f2 world radius 8000 \u79fb\u52d5\u7bc4\u56f2 nether radius 1000 \u79fb\u52d5\u7bc4\u56f2 end radius 6000 \u5b9a\u54e1 20\u4eba","title":"\u30b5\u30fc\u30d0\u60c5\u5831"},{"location":"#plugin","text":"\u30fbDynmap \u30fbGeyser \u30fbFloodGate \u30fbWorldBorder","title":"plugin"},{"location":"#dynmap","text":"https://minecraft.ryuzo.info/dynmap/","title":"Dynmap"},{"location":"#rule","text":"\u30b5\u30fc\u30d0\u304c\u7206\u767a\u3057\u3066\u3082\u6587\u53e5\u3092\u8a00\u308f\u306a\u3044 \u7ba1\u7406\u8005\u304c\u5931\u8e2a\u3057\u3066\u3082\u6587\u53e5\u3092\u8a00\u308f\u306a\u3044","title":"Rule"},{"location":"#_2","text":"imymeminecraftserver wiki","title":"\u904e\u53bb\u306e\u601d\u3044\u3067"},{"location":"memo/minecraft/server_build/","text":"JE/BE\u4e21\u5200\u30b5\u30fc\u30d0 JE/BE\u4e21\u65b9\u304b\u3089\u53c2\u52a0\u3067\u304d\u308b\u30b5\u30fc\u30d0\u3092\u5efa\u3066\u305f\u3044 OS:CentOS7.9 java:java17 directory:/mnt/xvdb/minecraft/ java install 1 yum -y install java-17-openjdk java-17-openjdk-devel purpurmc install purpur download purpurmc \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb\u3092DL \u53c2\u8003\uff1a Minecraft\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u7a2e\u985e\u307e\u3068\u3081 purpurmc start 1 java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui \u53c2\u8003\uff1a Minecraft\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u30e1\u30e2\u30ea\u3092\u3069\u308c\u304f\u3089\u3044\u5272\u308a\u5f53\u3066\u308b\u3079\u304d\u306a\u306e\u304b \u8d77\u52d5shell \u203b\u6a29\u9650\u3068\u304b\u306f\u9069\u5f53\u306b\u5909\u3048\u308b 1 2 #!/bin/sh java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui \u521d\u56de\u8d77\u52d5\u5f8c(\u5fc5\u305a\u5931\u6557\u3059\u308b)\u306b[/mnt/xvdb/minecraft/eula.txt]\u3092\u7de8\u96c6 [eula=false]\u3092[eula=true]\u306b\u5909\u66f4 1 2 3 4 #By changing the setting below to TRUE you are indicating your agreement to our EULA (https://account.mojang.com/documents/minecraft_eula). #You also agree that tacos are tasty, and the best food in the world. #Mon May 23 09:11:23 CST 2022 eula=true \u2190false\u304b\u3089true\u3078\u5909\u66f4 GeyserMC/Floodgate install \u53c2\u8003\uff1a \u3010\u30d7\u30e9\u30b0\u30a4\u30f3\u7d39\u4ecb\u3011\u7d71\u5408\u7248\u3068Java\u7248\u3067\u30af\u30ed\u30b9\u30d7\u30ec\u30a4\u304c\u51fa\u6765\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3010GeyserMC\u3011 \u4ee5\u4e0b2\u30d5\u30a1\u30a4\u30eb\u3092plugins\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3059\u308b GeyserMC \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb(Geyser-Spigot.jar)\u3092DL Floodgate \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb(floodgate-spigot.jar)\u3092DL 1 2 3 cd /mnt/xvdb/minecraft/plugins wget https://ci.opencollab.dev//job/GeyserMC/job/Geyser/job/master/lastSuccessfulBuild/artifact/bootstrap/spigot/target/Geyser-Spigot.jar wget https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/lastSuccessfulBuild/artifact/spigot/target/floodgate-spigot.jar 1\u5ea6server\u3092\u8d77\u52d5\u3057plugins\u30d5\u30a9\u30eb\u30c0\u5185GeyserMC\u306e[config.yml]\u7de8\u96c6\u3059\u308b [auth-type=online]\u3092[auth-type=floodgate]\u306b\u5909\u66f4 1 2 3 4 5 6 (snip) # Authentication type. Can be offline, online, or floodgate (see https://github.com/GeyserMC/Geyser/wiki/Floodgate). # For plugin versions, it's recommended to keep the `address` field to \"auto\" so Floodgate support is automatically configured. # If Floodgate is installed and `address:` is set to \"auto\", then \"auth-type: floodgate\" will automatically be used. auth-type: floodgate \u2190online\u304b\u3089\u5909\u66f4 (snip) Dynmap install bukkit dynmap \u304b\u3089\u5bfe\u5fdc\u3059\u308bversion\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092DL plugins\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bupload\u3057\u518d\u8d77\u52d5 Dynmap\u306eSSL\u5316 \u203bapache\u3067ssl\u5316\u6e08\u524d\u63d0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 vi /etc/httpd/conf.d/ssl.conf Listen 443 https Mutex default ssl-cache SSLCipherSuite ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:!DSS SSLCompression off SSLCryptoDevice builtin SSLHonorCipherOrder on SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog SSLProtocol -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 +TLSv1.2 SSLRandomSeed startup file:/dev/urandom 256 SSLRandomSeed connect builtin SSLSessionCache shmcb:/run/httpd/sslcache(512000) SSLSessionCacheTimeout 300 SSLStaplingResponderTimeout 5 SSLStaplingReturnResponderErrors off SSLStaplingCache shmcb:/var/run/ocsp(128000) SSLStrictSNIVHostCheck off SSLUseStapling on <VirtualHost *:443> ServerName minecraft.ryuzo.info ServerAdmin hogehoge@gmail.com DocumentRoot /var/www/html ErrorLog logs/ssl_error_log TransferLog logs/ssl_access_log LogLevel warn SSLEngine on SSLCertificateKeyFile live/minecraft.ryuzo.info/privkey.pem SSLCertificateFile live/minecraft.ryuzo.info/cert.pem SSLCertificateChainFile live/minecraft.ryuzo.info/chain.pem BrowserMatch \"MSIE [2-5]\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0 CustomLog logs/ssl_request_log \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\" <IfModule rewrite_module> RewriteEngine on RewriteCond %{REQUEST_URI} /dynmap$ RewriteRule /dynmap %{REQUEST_URI}/ [R=301,L] </IfModule> <IfModule proxy_module> ProxyPass /dynmap http://localhost:8123 </IfModule> </VirtualHost> \u305d\u306e\u307b\u304b port open minecraft:TCP\u306e25565\u3068UDP\u306e19132 Dynmap:8123 minecraft\u81ea\u52d5\u8d77\u52d5\u8d77\u52d5 1 2 3 4 5 6 7 /mnt/xvdb/minecraft/start.sh #!/bin/sh SCREEN_NAME='minecraft' screen -UAmdS $SCREEN_NAME java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 /etc/systemd/system/minecraft_server.service [Unit] Description=Minecraft Server After=network.target [Service] Type=forking WorkingDirectory=/mnt/xvdb/minecraft/ ExecStart=/bin/bash /mnt/xvdb/minecraft/start.sh Restart=always User=root Group=root [Install] WantedBy=multi-user.target 1 2 3 systemctl daemon-reload systemctl enable minecraft_server systemctl start minecraft_server","title":"JE/BE\u4e21\u5200\u30b5\u30fc\u30d0"},{"location":"memo/minecraft/server_build/#jebe","text":"JE/BE\u4e21\u65b9\u304b\u3089\u53c2\u52a0\u3067\u304d\u308b\u30b5\u30fc\u30d0\u3092\u5efa\u3066\u305f\u3044 OS:CentOS7.9 java:java17 directory:/mnt/xvdb/minecraft/","title":"JE/BE\u4e21\u5200\u30b5\u30fc\u30d0"},{"location":"memo/minecraft/server_build/#java-install","text":"1 yum -y install java-17-openjdk java-17-openjdk-devel","title":"java install"},{"location":"memo/minecraft/server_build/#purpurmc-install","text":"","title":"purpurmc install"},{"location":"memo/minecraft/server_build/#purpur-download","text":"purpurmc \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb\u3092DL \u53c2\u8003\uff1a Minecraft\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u7a2e\u985e\u307e\u3068\u3081","title":"purpur download"},{"location":"memo/minecraft/server_build/#purpurmc-start","text":"1 java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui \u53c2\u8003\uff1a Minecraft\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u30e1\u30e2\u30ea\u3092\u3069\u308c\u304f\u3089\u3044\u5272\u308a\u5f53\u3066\u308b\u3079\u304d\u306a\u306e\u304b \u8d77\u52d5shell \u203b\u6a29\u9650\u3068\u304b\u306f\u9069\u5f53\u306b\u5909\u3048\u308b 1 2 #!/bin/sh java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui \u521d\u56de\u8d77\u52d5\u5f8c(\u5fc5\u305a\u5931\u6557\u3059\u308b)\u306b[/mnt/xvdb/minecraft/eula.txt]\u3092\u7de8\u96c6 [eula=false]\u3092[eula=true]\u306b\u5909\u66f4 1 2 3 4 #By changing the setting below to TRUE you are indicating your agreement to our EULA (https://account.mojang.com/documents/minecraft_eula). #You also agree that tacos are tasty, and the best food in the world. #Mon May 23 09:11:23 CST 2022 eula=true \u2190false\u304b\u3089true\u3078\u5909\u66f4","title":"purpurmc start"},{"location":"memo/minecraft/server_build/#geysermcfloodgate-install","text":"\u53c2\u8003\uff1a \u3010\u30d7\u30e9\u30b0\u30a4\u30f3\u7d39\u4ecb\u3011\u7d71\u5408\u7248\u3068Java\u7248\u3067\u30af\u30ed\u30b9\u30d7\u30ec\u30a4\u304c\u51fa\u6765\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3010GeyserMC\u3011 \u4ee5\u4e0b2\u30d5\u30a1\u30a4\u30eb\u3092plugins\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3059\u308b GeyserMC \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb(Geyser-Spigot.jar)\u3092DL Floodgate \u304b\u3089jar\u30d5\u30a1\u30a4\u30eb(floodgate-spigot.jar)\u3092DL 1 2 3 cd /mnt/xvdb/minecraft/plugins wget https://ci.opencollab.dev//job/GeyserMC/job/Geyser/job/master/lastSuccessfulBuild/artifact/bootstrap/spigot/target/Geyser-Spigot.jar wget https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/lastSuccessfulBuild/artifact/spigot/target/floodgate-spigot.jar 1\u5ea6server\u3092\u8d77\u52d5\u3057plugins\u30d5\u30a9\u30eb\u30c0\u5185GeyserMC\u306e[config.yml]\u7de8\u96c6\u3059\u308b [auth-type=online]\u3092[auth-type=floodgate]\u306b\u5909\u66f4 1 2 3 4 5 6 (snip) # Authentication type. Can be offline, online, or floodgate (see https://github.com/GeyserMC/Geyser/wiki/Floodgate). # For plugin versions, it's recommended to keep the `address` field to \"auto\" so Floodgate support is automatically configured. # If Floodgate is installed and `address:` is set to \"auto\", then \"auth-type: floodgate\" will automatically be used. auth-type: floodgate \u2190online\u304b\u3089\u5909\u66f4 (snip)","title":"GeyserMC/Floodgate install"},{"location":"memo/minecraft/server_build/#dynmap-install","text":"bukkit dynmap \u304b\u3089\u5bfe\u5fdc\u3059\u308bversion\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092DL plugins\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bupload\u3057\u518d\u8d77\u52d5 Dynmap\u306eSSL\u5316 \u203bapache\u3067ssl\u5316\u6e08\u524d\u63d0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 vi /etc/httpd/conf.d/ssl.conf Listen 443 https Mutex default ssl-cache SSLCipherSuite ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:!DSS SSLCompression off SSLCryptoDevice builtin SSLHonorCipherOrder on SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog SSLProtocol -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 +TLSv1.2 SSLRandomSeed startup file:/dev/urandom 256 SSLRandomSeed connect builtin SSLSessionCache shmcb:/run/httpd/sslcache(512000) SSLSessionCacheTimeout 300 SSLStaplingResponderTimeout 5 SSLStaplingReturnResponderErrors off SSLStaplingCache shmcb:/var/run/ocsp(128000) SSLStrictSNIVHostCheck off SSLUseStapling on <VirtualHost *:443> ServerName minecraft.ryuzo.info ServerAdmin hogehoge@gmail.com DocumentRoot /var/www/html ErrorLog logs/ssl_error_log TransferLog logs/ssl_access_log LogLevel warn SSLEngine on SSLCertificateKeyFile live/minecraft.ryuzo.info/privkey.pem SSLCertificateFile live/minecraft.ryuzo.info/cert.pem SSLCertificateChainFile live/minecraft.ryuzo.info/chain.pem BrowserMatch \"MSIE [2-5]\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0 CustomLog logs/ssl_request_log \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\" <IfModule rewrite_module> RewriteEngine on RewriteCond %{REQUEST_URI} /dynmap$ RewriteRule /dynmap %{REQUEST_URI}/ [R=301,L] </IfModule> <IfModule proxy_module> ProxyPass /dynmap http://localhost:8123 </IfModule> </VirtualHost>","title":"Dynmap install"},{"location":"memo/minecraft/server_build/#_1","text":"","title":"\u305d\u306e\u307b\u304b"},{"location":"memo/minecraft/server_build/#port-open","text":"minecraft:TCP\u306e25565\u3068UDP\u306e19132 Dynmap:8123","title":"port open"},{"location":"memo/minecraft/server_build/#minecraft","text":"1 2 3 4 5 6 7 /mnt/xvdb/minecraft/start.sh #!/bin/sh SCREEN_NAME='minecraft' screen -UAmdS $SCREEN_NAME java -Xms1G -Xmx2G -jar /mnt/xvdb/minecraft/purpur-1.18.2-1626.jar nogui 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 /etc/systemd/system/minecraft_server.service [Unit] Description=Minecraft Server After=network.target [Service] Type=forking WorkingDirectory=/mnt/xvdb/minecraft/ ExecStart=/bin/bash /mnt/xvdb/minecraft/start.sh Restart=always User=root Group=root [Install] WantedBy=multi-user.target 1 2 3 systemctl daemon-reload systemctl enable minecraft_server systemctl start minecraft_server","title":"minecraft\u81ea\u52d5\u8d77\u52d5\u8d77\u52d5"},{"location":"memo/server/built/","text":"Let's Encrypt\u3092\u3064\u304b\u3063\u3066HTTPS\u5316 Dynmap\u3092HTTP\u306e\u307e\u307e\u3060\u3068\u4e0d\u7d30\u5de5 \u306a\u3093\u3068\u306a\u304f\u4f7f\u3063\u3066\u3082\u3089\u3046\u306e\u306b\u304a\u308c\u304a\u308c\u306f.... \u304b\u3068\u3044\u3063\u3066\u6709\u6599\u8a3c\u660e\u66f8\u8cb7\u3046\u306e\u306f..... Let's Encrypt\u3064\u304b\u304a\u3046 \u4e8b\u524d\u6e96\u5099 EPEL(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 yum install epel-release snapd(\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ea\u30dd\u30b8\u30c8\u30ea\u306fEPEL\u3092\u6307\u5b9a 1 yum --enablerepo=epel install snapd snapd\u306e\u8d77\u52d5&\u81ea\u52d5\u8d77\u52d5 1 systemctl enable --now snapd.socket \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210 1 ln -s /var/lib/snapd/snap /snap core\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 1 snap install core apache\u306einstall 1 2 3 yum install httpd systemctl start httpd.service systemctl enable httpd \u30c9\u30e1\u30a4\u30f3\u767b\u9332 apache\u8a2d\u5b9a config\u7de8\u96c6 1 2 3 4 vi /etc/httpd/conf/httpd.conf ServerName\u3092\u5909\u66f4 ServerName minecraft.ryuzo.info:80 Let\u2019s Encrypt\u8a2d\u5b9a Let\u2019s Encrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 snap install --classic certbot ln -s /snap/bin/certbot /usr/bin/certbot \u8a3c\u660e\u66f8\u4f5c\u6210 1 2 3 4 5 6 7 8 /usr/bin/certbot certonly \\ --non-interactive \\ --webroot \\ -w /var/www/html \\ -d minecraft.ryuzo.info \\ --preferred-challenges http \\ --agree-tos \\ -m hogehoge@gmail.com \\ [/etc/letsencrypt/live/minecraft.ryuzo.info]\u306b\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210 1 2 cd /etc/httpd/ ln -s /etc/letsencrypt/live live apache\u306essl\u5316 mod_ssl\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 yum -y install mod_ssl ssl.conf\u7de8\u96c6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 vi /etc/httpd/conf.d/ssl.conf Listen 443 https Mutex default ssl-cache SSLCipherSuite ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:!DSS SSLCompression off SSLCryptoDevice builtin SSLHonorCipherOrder on SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog SSLProtocol -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 +TLSv1.2 SSLRandomSeed startup file:/dev/urandom 256 SSLRandomSeed connect builtin SSLSessionCache shmcb:/run/httpd/sslcache(512000) SSLSessionCacheTimeout 300 SSLStaplingResponderTimeout 5 SSLStaplingReturnResponderErrors off SSLStaplingCache shmcb:/var/run/ocsp(128000) SSLStrictSNIVHostCheck off SSLUseStapling on <VirtualHost *:443> ServerName minecraft.ryuzo.info ServerAdmin hogefuga@gmail.com DocumentRoot /var/www/html ErrorLog logs/ssl_error_log TransferLog logs/ssl_access_log LogLevel warn SSLEngine on SSLCertificateKeyFile live/minecraft.ryuzo.info/privkey.pem SSLCertificateFile live/minecraft.ryuzo.info/cert.pem SSLCertificateChainFile live/minecraft.ryuzo.info/chain.pem BrowserMatch \"MSIE [2-5]\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0 CustomLog logs/ssl_request_log \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\" </VirtualHost> rewrite.conf\u7de8\u96c6 1 2 3 4 5 6 7 8 9 vi /etc/httpd/conf.d/rewrite.conf <IfModule rewrite_module> RewriteEngine On LogLevel alert rewrite:trace3 RewriteCond %{HTTPS} off RewriteCond %{REQUEST_URI} !(^/.well-known/) RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] </IfModule> \u8a3c\u660e\u66f8\u306e\u81ea\u52d5\u66f4\u65b0 script\u4f5c\u6210 1 2 3 4 5 6 7 vi /etc/letsencrypt/letsencrypt-renew.sh #!/bin/sh certbot renew -q --no-self-upgrade --post-hook \"systemctl restart httpd.service\" \u6a29\u9650 chmod 0700 /etc/letsencrypt/letsencrypt-renew.sh cron\u8a2d\u5b9a \u6bce\u65e53\u6642\u306b\u5b9f\u884c 1 2 3 crontab -e 0 3 * * * /etc/letsencrypt/letsencrypt-renew.sh","title":"Let's Encrypt\u3092\u3064\u304b\u3063\u3066HTTPS\u5316"},{"location":"memo/server/built/#lets-encrypthttps","text":"Dynmap\u3092HTTP\u306e\u307e\u307e\u3060\u3068\u4e0d\u7d30\u5de5 \u306a\u3093\u3068\u306a\u304f\u4f7f\u3063\u3066\u3082\u3089\u3046\u306e\u306b\u304a\u308c\u304a\u308c\u306f.... \u304b\u3068\u3044\u3063\u3066\u6709\u6599\u8a3c\u660e\u66f8\u8cb7\u3046\u306e\u306f..... Let's Encrypt\u3064\u304b\u304a\u3046","title":"Let's Encrypt\u3092\u3064\u304b\u3063\u3066HTTPS\u5316"},{"location":"memo/server/built/#_1","text":"EPEL(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 yum install epel-release snapd(\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ea\u30dd\u30b8\u30c8\u30ea\u306fEPEL\u3092\u6307\u5b9a 1 yum --enablerepo=epel install snapd snapd\u306e\u8d77\u52d5&\u81ea\u52d5\u8d77\u52d5 1 systemctl enable --now snapd.socket \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210 1 ln -s /var/lib/snapd/snap /snap core\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 1 snap install core apache\u306einstall 1 2 3 yum install httpd systemctl start httpd.service systemctl enable httpd \u30c9\u30e1\u30a4\u30f3\u767b\u9332","title":"\u4e8b\u524d\u6e96\u5099"},{"location":"memo/server/built/#apache","text":"config\u7de8\u96c6 1 2 3 4 vi /etc/httpd/conf/httpd.conf ServerName\u3092\u5909\u66f4 ServerName minecraft.ryuzo.info:80","title":"apache\u8a2d\u5b9a"},{"location":"memo/server/built/#lets-encrypt","text":"Let\u2019s Encrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 snap install --classic certbot ln -s /snap/bin/certbot /usr/bin/certbot \u8a3c\u660e\u66f8\u4f5c\u6210 1 2 3 4 5 6 7 8 /usr/bin/certbot certonly \\ --non-interactive \\ --webroot \\ -w /var/www/html \\ -d minecraft.ryuzo.info \\ --preferred-challenges http \\ --agree-tos \\ -m hogehoge@gmail.com \\ [/etc/letsencrypt/live/minecraft.ryuzo.info]\u306b\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210 1 2 cd /etc/httpd/ ln -s /etc/letsencrypt/live live","title":"Let\u2019s Encrypt\u8a2d\u5b9a"},{"location":"memo/server/built/#apachessl","text":"mod_ssl\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 yum -y install mod_ssl ssl.conf\u7de8\u96c6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 vi /etc/httpd/conf.d/ssl.conf Listen 443 https Mutex default ssl-cache SSLCipherSuite ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:!DSS SSLCompression off SSLCryptoDevice builtin SSLHonorCipherOrder on SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog SSLProtocol -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 +TLSv1.2 SSLRandomSeed startup file:/dev/urandom 256 SSLRandomSeed connect builtin SSLSessionCache shmcb:/run/httpd/sslcache(512000) SSLSessionCacheTimeout 300 SSLStaplingResponderTimeout 5 SSLStaplingReturnResponderErrors off SSLStaplingCache shmcb:/var/run/ocsp(128000) SSLStrictSNIVHostCheck off SSLUseStapling on <VirtualHost *:443> ServerName minecraft.ryuzo.info ServerAdmin hogefuga@gmail.com DocumentRoot /var/www/html ErrorLog logs/ssl_error_log TransferLog logs/ssl_access_log LogLevel warn SSLEngine on SSLCertificateKeyFile live/minecraft.ryuzo.info/privkey.pem SSLCertificateFile live/minecraft.ryuzo.info/cert.pem SSLCertificateChainFile live/minecraft.ryuzo.info/chain.pem BrowserMatch \"MSIE [2-5]\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0 CustomLog logs/ssl_request_log \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\" </VirtualHost> rewrite.conf\u7de8\u96c6 1 2 3 4 5 6 7 8 9 vi /etc/httpd/conf.d/rewrite.conf <IfModule rewrite_module> RewriteEngine On LogLevel alert rewrite:trace3 RewriteCond %{HTTPS} off RewriteCond %{REQUEST_URI} !(^/.well-known/) RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] </IfModule>","title":"apache\u306essl\u5316"},{"location":"memo/server/built/#_2","text":"script\u4f5c\u6210 1 2 3 4 5 6 7 vi /etc/letsencrypt/letsencrypt-renew.sh #!/bin/sh certbot renew -q --no-self-upgrade --post-hook \"systemctl restart httpd.service\" \u6a29\u9650 chmod 0700 /etc/letsencrypt/letsencrypt-renew.sh cron\u8a2d\u5b9a \u6bce\u65e53\u6642\u306b\u5b9f\u884c 1 2 3 crontab -e 0 3 * * * /etc/letsencrypt/letsencrypt-renew.sh","title":"\u8a3c\u660e\u66f8\u306e\u81ea\u52d5\u66f4\u65b0"}]}